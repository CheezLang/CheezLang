#load("../io.che")

struct TokenLocation {
    file: string
    line: int
    start: int
    end: int
}

impl TokenLocation {
    ref fn Clone() -> TokenLocation {
        return new TokenLocation {
            file,
            line,
            start,
            end
        }
    }
}

struct Token {
    type: TokenType
    location: TokenLocation
}

impl Token {
    ref fn Print() {
        Printfn("{s}:{i32}: {s}", [ (any)location.file, location.line, type.ToString() ])
    }
}

enum TokenType {
    Unknown

    NewLine
    EOF

    StringLiteral
    NumberLiteral

    Identifier

    Semicolon
    DoubleColon
    Colon
    Comma
    Period
    Equal
    Ampersand
    HashTag

    Plus
    Minus
    Asterisk
    ForwardSlash
    Percent

    Less
    LessEqual
    Greater
    GreaterEqual
    DoubleEqual
    NotEqual

    OpenParen
    ClosingParen

    OpenBrace
    ClosingBrace
    
    OpenBracket
    ClosingBracket

    KwReturn
    KwCast
    KwRef
    KwFn
    KwStruct
    KwEnum
    KwImpl
    KwConstant
    KwVar
    KwIf
    KwElse
    KwFor
    KwWhile
    KwAnd
    KwOr
    KwTrue
    KwFalse
    KwUsing
    KwPrint
    KwPrintln
}

impl TokenType {
    fn ToString() -> string {
        match self {
            TokenType.Unknown -> return "Unknown",
            TokenType.NewLine -> return "NewLine",
            TokenType.EOF -> return "EOF",
            TokenType.StringLiteral -> return "StringLiteral",
            TokenType.NumberLiteral -> return "NumberLiteral",
            TokenType.Identifier -> return "Identifier",
            TokenType.Semicolon -> return "Semicolon",
            TokenType.DoubleColon -> return "DoubleColon",
            TokenType.Colon -> return "Colon",
            TokenType.Comma -> return "Comma",
            TokenType.Period -> return "Period",
            TokenType.Equal -> return "Equal",
            TokenType.Ampersand -> return "Ampersand",
            TokenType.HashTag -> return "HashTag",
            TokenType.Plus -> return "Plus",
            TokenType.Minus -> return "Minus",
            TokenType.Asterisk -> return "Asterisk",
            TokenType.ForwardSlash -> return "ForwardSlash",
            TokenType.Percent -> return "Percent",
            TokenType.Less -> return "Less",
            TokenType.LessEqual -> return "LessEqual",
            TokenType.Greater -> return "Greater",
            TokenType.GreaterEqual -> return "GreaterEqual",
            TokenType.DoubleEqual -> return "DoubleEqual",
            TokenType.NotEqual -> return "NotEqual",
            TokenType.OpenParen -> return "OpenParen",
            TokenType.ClosingParen -> return "ClosingParen",
            TokenType.OpenBrace -> return "OpenBrace",
            TokenType.ClosingBrace -> return "ClosingBrace",
            TokenType.OpenBracket -> return "OpenBracket",
            TokenType.ClosingBracket -> return "ClosingBracket",
            TokenType.KwReturn -> return "KwReturn",
            TokenType.KwCast -> return "KwCast",
            TokenType.KwRef -> return "KwRef",
            TokenType.KwFn -> return "KwFn",
            TokenType.KwStruct -> return "KwStruct",
            TokenType.KwEnum -> return "KwEnum",
            TokenType.KwImpl -> return "KwImpl",
            TokenType.KwConstant -> return "KwConstant",
            TokenType.KwVar -> return "KwVar",
            TokenType.KwIf -> return "KwIf",
            TokenType.KwElse -> return "KwElse",
            TokenType.KwFor -> return "KwFor",
            TokenType.KwWhile -> return "KwWhile",
            TokenType.KwAnd -> return "KwAnd",
            TokenType.KwOr -> return "KwOr",
            TokenType.KwTrue -> return "KwTrue",
            TokenType.KwFalse -> return "KwFalse",
            TokenType.KwUsing -> return "KwUsing",
            TokenType.KwPrint -> return "KwPrint",
            TokenType.KwPrintln -> return "KwPrintln",
        }
        return "UNKNOWN"
    }
}
