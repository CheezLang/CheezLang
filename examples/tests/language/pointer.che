#test_expect_output("123")
#test_expect_output("123")
#test_expect_output("456")
#test_expect_output("456")
#test_expect_output("789")
#test_expect_output("789")
#test_expect_output("5, 9")
#test_expect_output("9, 5")

#load("std:preload")

fn c_printf(format: c_string) #varargs #linkname("printf");

fn swap(pa: &int, pb: &int) {
    a := <<pa
    b := <<pb
    (<<pa, <<pb) = (b, a)
}

fn Main() {
    {
        a := 123
        pa := &a

        c_printf("%d`n", a)
        c_printf("%d`n", <<pa)

        a = 456

        c_printf("%d`n", a)
        c_printf("%d`n", <<pa)

        <<pa = 789

        c_printf("%d`n", a)
        c_printf("%d`n", <<pa)
    }

    {
        a := 5
        b := 9
        c_printf("%d, %d`n", a, b)
        swap(&a, &b)
        c_printf("%d, %d`n", a, b)
    }
}