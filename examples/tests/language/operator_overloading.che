#test_expect_output("1")
#test_expect_output("2")
#test_expect_output("3")
#test_expect_output("3")
#test_expect_output("2")
#test_expect_output("8")

fn c_printf(format: c_string) #varargs #linkname("printf");

struct Num {
    x: int
}

fn num_add(a: Num, b: Num) -> Num #operator("+") {
    return new { a.x + b.x }
}

fn num_inc(a: *Num, b: Num) #operator("+=") {
    a.x += b.x
}

fn Main() {
    let a = new Num{1}
    let b = new Num{2}
    let c = a + b

    c_printf("%lld`n", a.x)
    c_printf("%lld`n", b.x)
    c_printf("%lld`n", c.x)

    (a, c) += (b, new Num{5})
    
    c_printf("%lld`n", a.x)
    c_printf("%lld`n", b.x)
    c_printf("%lld`n", c.x)
}